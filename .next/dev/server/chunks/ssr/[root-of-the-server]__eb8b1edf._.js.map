{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/theresonance-org/src/components/AudioProvider.tsx"],"sourcesContent":["\"use client\"\nimport React, { createContext, useContext, useEffect, useRef, useState } from 'react'\n\ntype Track = {\n  id: string\n  title: string\n  src: string\n  artist?: string\n}\n\ntype AudioContextValue = {\n  currentTrack: Track | null\n  isPlaying: boolean\n  playTrack: (t: Track) => void\n  togglePlay: () => void\n  pause: () => void\n  seek: (time: number) => void\n  setVolume: (v: number) => void\n  currentTime: number\n  duration: number\n}\n\nconst AudioCtx = createContext<AudioContextValue | undefined>(undefined)\n\nexport const useAudio = () => {\n  const c = useContext(AudioCtx)\n  if (!c) throw new Error('useAudio must be used within provider')\n  return c\n}\n\nexport const AudioPlayerProvider = ({ children }: { children: React.ReactNode }) => {\n  const audioRef = useRef<HTMLAudioElement | null>(null)\n  const [currentTrack, setCurrentTrack] = useState<Track | null>(null)\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [currentTime, setCurrentTime] = useState(0)\n  const [duration, setDuration] = useState(0)\n\n  useEffect(() => {\n    if (!audioRef.current) audioRef.current = new Audio()\n    const audio = audioRef.current\n\n    const onTime = () => setCurrentTime(audio.currentTime)\n    const onDuration = () => setDuration(audio.duration || 0)\n    const onEnd = () => setIsPlaying(false)\n\n    audio.addEventListener('timeupdate', onTime)\n    audio.addEventListener('loadedmetadata', onDuration)\n    audio.addEventListener('ended', onEnd)\n\n    return () => {\n      audio.removeEventListener('timeupdate', onTime)\n      audio.removeEventListener('loadedmetadata', onDuration)\n      audio.removeEventListener('ended', onEnd)\n    }\n  }, [])\n\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (['INPUT', 'TEXTAREA'].includes((e.target as HTMLElement)?.tagName)) return\n      if (e.code === 'Space') {\n        e.preventDefault()\n        togglePlay()\n      }\n      if (e.key === 'ArrowRight') seek((audioRef.current?.currentTime || 0) + 5)\n      if (e.key === 'ArrowLeft') seek((audioRef.current?.currentTime || 0) - 5)\n    }\n    window.addEventListener('keydown', onKey)\n    return () => window.removeEventListener('keydown', onKey)\n  }, [currentTrack, isPlaying])\n\n  const playTrack = (t: Track) => {\n    const audio = audioRef.current!\n    if (!audio) return\n    if (currentTrack?.src !== t.src) {\n      audio.src = t.src\n      setCurrentTrack(t)\n    }\n    audio.play().then(() => setIsPlaying(true)).catch(() => setIsPlaying(false))\n  }\n\n  const togglePlay = () => {\n    const audio = audioRef.current\n    if (!audio) return\n    if (isPlaying) { audio.pause(); setIsPlaying(false) }\n    else { audio.play().then(() => setIsPlaying(true)).catch(() => setIsPlaying(false)) }\n  }\n\n  const pause = () => { audioRef.current?.pause(); setIsPlaying(false) }\n  const seek = (t: number) => { if (audioRef.current) audioRef.current.currentTime = Math.max(0, Math.min((duration || Infinity), t)) }\n  const setVolume = (v: number) => { if (audioRef.current) audioRef.current.volume = v }\n\n  return (\n    <AudioCtx.Provider value={{ currentTrack, isPlaying, playTrack, togglePlay, pause, seek, setVolume, currentTime, duration }}>\n      {children}\n    </AudioCtx.Provider>\n  )\n}\n"],"names":[],"mappings":";;;;;;;AACA;AADA;;;AAsBA,MAAM,yBAAW,IAAA,sNAAa,EAAgC;AAEvD,MAAM,WAAW;IACtB,MAAM,IAAI,IAAA,mNAAU,EAAC;IACrB,IAAI,CAAC,GAAG,MAAM,IAAI,MAAM;IACxB,OAAO;AACT;AAEO,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAiC;IAC7E,MAAM,WAAW,IAAA,+MAAM,EAA0B;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAe;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS,OAAO,EAAE,SAAS,OAAO,GAAG,IAAI;QAC9C,MAAM,QAAQ,SAAS,OAAO;QAE9B,MAAM,SAAS,IAAM,eAAe,MAAM,WAAW;QACrD,MAAM,aAAa,IAAM,YAAY,MAAM,QAAQ,IAAI;QACvD,MAAM,QAAQ,IAAM,aAAa;QAEjC,MAAM,gBAAgB,CAAC,cAAc;QACrC,MAAM,gBAAgB,CAAC,kBAAkB;QACzC,MAAM,gBAAgB,CAAC,SAAS;QAEhC,OAAO;YACL,MAAM,mBAAmB,CAAC,cAAc;YACxC,MAAM,mBAAmB,CAAC,kBAAkB;YAC5C,MAAM,mBAAmB,CAAC,SAAS;QACrC;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,CAAC;YACb,IAAI;gBAAC;gBAAS;aAAW,CAAC,QAAQ,CAAE,EAAE,MAAM,EAAkB,UAAU;YACxE,IAAI,EAAE,IAAI,KAAK,SAAS;gBACtB,EAAE,cAAc;gBAChB;YACF;YACA,IAAI,EAAE,GAAG,KAAK,cAAc,KAAK,CAAC,SAAS,OAAO,EAAE,eAAe,CAAC,IAAI;YACxE,IAAI,EAAE,GAAG,KAAK,aAAa,KAAK,CAAC,SAAS,OAAO,EAAE,eAAe,CAAC,IAAI;QACzE;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;QAAc;KAAU;IAE5B,MAAM,YAAY,CAAC;QACjB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QACZ,IAAI,cAAc,QAAQ,EAAE,GAAG,EAAE;YAC/B,MAAM,GAAG,GAAG,EAAE,GAAG;YACjB,gBAAgB;QAClB;QACA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAM,aAAa,OAAO,KAAK,CAAC,IAAM,aAAa;IACvE;IAEA,MAAM,aAAa;QACjB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QACZ,IAAI,WAAW;YAAE,MAAM,KAAK;YAAI,aAAa;QAAO,OAC/C;YAAE,MAAM,IAAI,GAAG,IAAI,CAAC,IAAM,aAAa,OAAO,KAAK,CAAC,IAAM,aAAa;QAAQ;IACtF;IAEA,MAAM,QAAQ;QAAQ,SAAS,OAAO,EAAE;QAAS,aAAa;IAAO;IACrE,MAAM,OAAO,CAAC;QAAgB,IAAI,SAAS,OAAO,EAAE,SAAS,OAAO,CAAC,WAAW,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAE,YAAY,UAAW;IAAI;IACpI,MAAM,YAAY,CAAC;QAAgB,IAAI,SAAS,OAAO,EAAE,SAAS,OAAO,CAAC,MAAM,GAAG;IAAE;IAErF,qBACE,8OAAC,SAAS,QAAQ;QAAC,OAAO;YAAE;YAAc;YAAW;YAAW;YAAY;YAAO;YAAM;YAAW;YAAa;QAAS;kBACvH;;;;;;AAGP"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/theresonance-org/src/components/MiniPlayer.tsx"],"sourcesContent":["\"use client\"\nimport React from 'react'\nimport { useAudio } from './AudioProvider'\n\nexport default function MiniPlayer() {\n  const { currentTrack, isPlaying, togglePlay, currentTime, duration, seek, setVolume } = useAudio()\n\n  if (!currentTrack) return null\n\n  const format = (s: number) => {\n    if (!s || !isFinite(s)) return '0:00'\n    const m = Math.floor(s / 60)\n    const sec = Math.floor(s % 60).toString().padStart(2, '0')\n    return `${m}:${sec}`\n  }\n\n  const pct = duration ? (currentTime / duration) * 100 : 0\n\n  return (\n    <div className=\"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-neutral-800/90 border border-neutral-700 rounded-md px-4 py-3 shadow-lg z-50 w-[min(48rem,95%)]\">\n      <div className=\"flex items-center gap-4\">\n        <div>\n          <div className=\"text-sm font-medium\">{currentTrack.title}</div>\n          <div className=\"text-xs text-neutral-400\">{currentTrack.artist}</div>\n        </div>\n        <button aria-label={isPlaying ? 'Pause' : 'Play'} onClick={togglePlay} className=\"px-3 py-2 bg-neutral-700 rounded focus-ring\">\n          {isPlaying ? 'Pause' : 'Play'}\n        </button>\n        <div className=\"flex-1\">\n          <input aria-label=\"Seek\" className=\"w-full\" type=\"range\" min={0} max={duration || 0} value={currentTime} onChange={(e) => seek(Number(e.target.value))} />\n          <div className=\"flex justify-between text-xs text-neutral-400 mt-1\">\n            <span>{format(currentTime)}</span>\n            <span>-{format(Math.max(0, duration - currentTime))}</span>\n          </div>\n        </div>\n        <input aria-label=\"Volume\" type=\"range\" min={0} max={1} step={0.01} defaultValue={1} onChange={(e) => setVolume(Number(e.target.value))} className=\"w-24\" />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,EAAE,YAAY,EAAE,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,+IAAQ;IAEhG,IAAI,CAAC,cAAc,OAAO;IAE1B,MAAM,SAAS,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,OAAO;QAC/B,MAAM,IAAI,KAAK,KAAK,CAAC,IAAI;QACzB,MAAM,MAAM,KAAK,KAAK,CAAC,IAAI,IAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG;QACtD,OAAO,GAAG,EAAE,CAAC,EAAE,KAAK;IACtB;IAEA,MAAM,MAAM,WAAW,AAAC,cAAc,WAAY,MAAM;IAExD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAI,WAAU;sCAAuB,aAAa,KAAK;;;;;;sCACxD,8OAAC;4BAAI,WAAU;sCAA4B,aAAa,MAAM;;;;;;;;;;;;8BAEhE,8OAAC;oBAAO,cAAY,YAAY,UAAU;oBAAQ,SAAS;oBAAY,WAAU;8BAC9E,YAAY,UAAU;;;;;;8BAEzB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,cAAW;4BAAO,WAAU;4BAAS,MAAK;4BAAQ,KAAK;4BAAG,KAAK,YAAY;4BAAG,OAAO;4BAAa,UAAU,CAAC,IAAM,KAAK,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;sCACpJ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,OAAO;;;;;;8CACd,8OAAC;;wCAAK;wCAAE,OAAO,KAAK,GAAG,CAAC,GAAG,WAAW;;;;;;;;;;;;;;;;;;;8BAG1C,8OAAC;oBAAM,cAAW;oBAAS,MAAK;oBAAQ,KAAK;oBAAG,KAAK;oBAAG,MAAM;oBAAM,cAAc;oBAAG,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAI3J"}}]
}