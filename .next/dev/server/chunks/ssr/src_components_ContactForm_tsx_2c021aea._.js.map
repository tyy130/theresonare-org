{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/theresonance-org/src/components/ContactForm.tsx"],"sourcesContent":["\"use client\"\nimport React, { useEffect, useState } from 'react'\nimport { z } from 'zod'\n\nconst contactSchema = z.object({\n  name: z.string().min(2, 'Please enter your name'),\n  email: z.string().email('Please enter a valid email'),\n  message: z.string().min(10, 'Please include a message'),\n  consent: z.boolean().refine(Boolean, 'Consent required'),\n  _honeypot: z.string().optional(),\n})\n\ntype Contact = z.infer<typeof contactSchema>\n\nexport default function ContactForm({ defaultSummary = '' }: { defaultSummary?: string }) {\n  const [form, setForm] = useState<Contact>({ name: '', email: '', message: defaultSummary || '', consent: false, _honeypot: '' })\n  const [errors, setErrors] = useState<Partial<Record<keyof Contact, string>>>({})\n  const [loading, setLoading] = useState(false)\n  const [success, setSuccess] = useState<string | null>(null)\n  const [serverErr, setServerErr] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (defaultSummary) setForm((f) => ({ ...f, message: defaultSummary }))\n  }, [defaultSummary])\n\n  const update = (k: keyof Contact, v: any) => setForm((s) => ({ ...s, [k]: v }))\n\n  const validate = () => {\n    const res = contactSchema.safeParse(form)\n    if (!res.success) {\n      const zErrors: Partial<Record<keyof Contact, string>> = {}\n      res.error.issues.forEach((i) => { const k = i.path[0] as keyof Contact; zErrors[k] = i.message })\n      setErrors(zErrors)\n      return false\n    }\n    setErrors({})\n    return true\n  }\n\n  const submit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!validate()) return\n    if (form._honeypot) return // caught bot\n    setLoading(true)\n    try {\n      const res = await fetch('/api/contact', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(form) })\n      const data = await res.json()\n      if (!res.ok) {\n        setServerErr(data.error || 'Server error')\n      } else {\n        setSuccess(data.requestId)\n        setForm({ name: '', email: '', message: '', consent: false, _honeypot: '' })\n      }\n    } catch (err) {\n      setServerErr('Network error')\n    } finally { setLoading(false) }\n  }\n\n  return (\n    <form onSubmit={submit} className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm\">Name</label>\n        <input aria-label=\"Name\" value={form.name} onChange={(e) => update('name', e.target.value)} className=\"w-full p-2 mt-1 bg-neutral-900 border border-neutral-700 rounded focus-ring\" />\n        {errors.name && <div className=\"text-xs text-red-400\">{errors.name}</div>}\n      </div>\n\n      <div>\n        <label className=\"block text-sm\">Email</label>\n        <input aria-label=\"Email\" value={form.email} onChange={(e) => update('email', e.target.value)} className=\"w-full p-2 mt-1 bg-neutral-900 border border-neutral-700 rounded focus-ring\" />\n        {errors.email && <div className=\"text-xs text-red-400\">{errors.email}</div>}\n      </div>\n\n      <div>\n        <label className=\"block text-sm\">Message</label>\n        <textarea aria-label=\"Message\" value={form.message} onChange={(e) => update('message', e.target.value)} className=\"w-full p-2 mt-1 bg-neutral-900 border border-neutral-700 rounded focus-ring\" rows={5}></textarea>\n        {errors.message && <div className=\"text-xs text-red-400\">{errors.message}</div>}\n      </div>\n\n      <div className=\"hidden\">\n        <label>Website</label>\n        <input name=\"_honeypot\" value={form._honeypot} onChange={(e) => update('_honeypot', e.target.value)} />\n      </div>\n\n      <div className=\"flex items-start gap-2\">\n        <input id=\"consent\" type=\"checkbox\" checked={form.consent} onChange={(e) => update('consent', e.target.checked)} />\n        <label htmlFor=\"consent\" className=\"text-sm\">I consent to the <a className=\"underline\" href=\"/terms\">Terms</a> and <a className=\"underline\" href=\"/privacy\">Privacy</a> policies</label>\n      </div>\n      {errors.consent && <div className=\"text-xs text-red-400\">{errors.consent}</div>}\n\n      <div>\n        <button type=\"submit\" disabled={loading} className=\"px-4 py-2 rounded bg-neutral-700 focus-ring\">{loading ? 'Sending…' : 'Send Message'}</button>\n      </div>\n      {serverErr && <div className=\"text-red-400\">{serverErr}</div>}\n      {success && <div className=\"text-green-400\">Message sent — request ID: {success}</div>}\n    </form>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}